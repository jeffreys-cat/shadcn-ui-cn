---
title: Next.js 15 + React 19
description: åœ¨ Next.js 15 ä¸ React 19 ä¸­ä½¿ç”¨ shadcn/uiã€‚
---

<Callout className="">
  **æ›´æ–°ï¼š** æœ€æ–°ç‰ˆ `latest` å·²å®Œæ•´æ”¯æŒ React 19 ä¸ Tailwind v4ã€‚**æœ¬æ–‡å¯èƒ½å­˜åœ¨è¿‡æ—¶ä¿¡æ¯ï¼Œä½¿ç”¨å‰è¯·ç•™æ„ã€‚**
</Callout>

## TL;DR

å¦‚æœä½¿ç”¨ `npm`ï¼Œshadcn/ui ä¾èµ–éœ€è¦é…åˆå‚æ•°å®‰è£…ã€‚è¿è¡Œ CLI æ—¶ä¼šæç¤ºé€‰æ‹©ç›¸åº”å‚æ•°ï¼›pnpmã€bunã€yarn æ— éœ€é¢å¤–è®¾ç½®ã€‚

å„ä¾èµ–å¯¹ React 19 çš„å…¼å®¹æƒ…å†µè§ [Upgrade Status](#upgrade-status)ã€‚

## å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ

React 19 ç°å·²å‘å¸ƒ [RC](https://www.npmjs.com/package/react?activeTab=versions)ï¼Œå¹¶ä¸” [Next.js 15 å·²å®Œæˆæµ‹è¯•ä¸æ”¯æŒ](https://nextjs.org/blog/next-15#react-19)ã€‚

è¦å…¼å®¹ React 19ï¼Œä¾èµ–åŒ…éœ€è¦å°† React 19 æ·»åŠ ä¸º peer dependencyï¼Œç›®å‰å„åº“æ­£åœ¨é™†ç»­å®Œæˆæ›´æ–°ï¼ˆä¾‹å¦‚ [radix-ui](https://github.com/radix-ui/primitives/pull/2952)ã€[cmdk](https://github.com/pacocoursey/cmdk/pull/318)ã€[vaul](https://github.com/emilkowalski/vaul/pull/498) ç­‰ï¼‰ã€‚

```diff /^19.0/
"peerDependencies": {
-  "react": "^16.8 || ^17.0 || ^18.0",
+  "react": "^16.8 || ^17.0 || ^18.0 || ^19.0",
-  "react-dom": "^16.8 || ^17.0 || ^18.0"
+  "react-dom": "^16.8 || ^17.0 || ^18.0 || ^19.0"
},
```

<Callout>
  å¯é€šè¿‡ `npm info <package> peerDependencies` æ£€æŸ¥æŸä¸ªä¾èµ–æ˜¯å¦å·²å£°æ˜ React 19ã€‚
</Callout>

åœ¨ä¾èµ–å°šæœªå£°æ˜ React 19 æ—¶ï¼Œä½¿ç”¨ npm å®‰è£…ä¼šçœ‹åˆ°ç±»ä¼¼é”™è¯¯ï¼š

```bash
npm error code ERESOLVE
npm error ERESOLVE unable to resolve dependency tree
npm error
npm error While resolving: my-app@0.1.0
npm error Found: react@19.0.0-rc-69d4b800-20241021
npm error node_modules/react
npm error   react@"19.0.0-rc-69d4b800-20241021" from the root project
```

<Callout>
  **æ³¨æ„ï¼š** è¯¥æŠ¥é”™ä»…å­˜åœ¨äº npmã€‚pnpm ä¸ Bun åªä¼šç»™å‡ºè­¦å‘Šã€‚
</Callout>

## è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆä¸€ï¼šä½¿ç”¨ `--force` æˆ– `--legacy-peer-deps`

é€šè¿‡å‚æ•°å¼ºåˆ¶å®‰è£…ä¾èµ–ï¼š

```bash
npm i <package> --force

npm i <package> --legacy-peer-deps
```

è¿™æ ·å¯ä»¥å¿½ç•¥ peer dependency æ ¡éªŒã€‚

<Accordion type="multiple">
  <AccordionItem value="flags">
    <AccordionTrigger className="font-medium">
      `--force` ä¸ `--legacy-peer-deps` æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ
    </AccordionTrigger>
    <AccordionContent className="[&_ul]:mt-0">

      - `--force`ï¼šå¿½ç•¥å†²çªå¹¶å¼ºåˆ¶å®‰è£…ä¾èµ–ã€‚
      - `--legacy-peer-deps`ï¼šè·³è¿‡ä¸¥æ ¼çš„ peer dependency æ£€æŸ¥ï¼Œé˜²æ­¢å®‰è£…æŠ¥é”™ã€‚

    </AccordionContent>

  </AccordionItem>
</Accordion>

### æ–¹æ¡ˆäºŒï¼šæš‚æ—¶ä½¿ç”¨ React 18

å°† `react` å’Œ `react-dom` é™çº§åˆ° 18ï¼Œå¾…ä¾èµ–æ›´æ–°åå†å‡çº§ï¼š

```bash
npm i react@18 react-dom@18
```

æ— è®ºé‡‡ç”¨å“ªç§æ–¹æ¡ˆï¼Œå®ŒæˆååŠ¡å¿…å……åˆ†æµ‹è¯•åº”ç”¨ï¼Œç¡®ä¿æ²¡æœ‰å›å½’é—®é¢˜ã€‚

## åœ¨ Next.js 15 ä¸­ä½¿ç”¨ shadcn/ui

### ä½¿ç”¨ pnpmã€bun æˆ– yarn

æŒ‰ç…§ [å®‰è£…æŒ‡å—](/docs/installation/next) æ“ä½œå³å¯ï¼Œæ— éœ€é¢å¤–å‚æ•°ã€‚

### ä½¿ç”¨ npm

è¿è¡Œ `npx shadcn@latest init -d` æ—¶ï¼ŒCLI ä¼šæç¤ºé€‰æ‹©è§£å†³ peer dependency çš„æ–¹æ¡ˆï¼š

```bash
It looks like you are using React 19.
Some packages may fail to install due to peer dependency issues (see https://ui.shadcn.com/react-19).

? How would you like to proceed? â€º - Use arrow-keys. Return to submit.
â¯   Use --force
    Use --legacy-peer-deps
```

é€‰æ‹©å¯¹åº”é€‰é¡¹åï¼ŒCLI ä¼šå¸¦ä¸Šå‚æ•°æ‰§è¡Œã€‚

## æ·»åŠ ç»„ä»¶

æ·»åŠ ç»„ä»¶æ—¶æµç¨‹ä¸ä¸Šé¢ä¸€è‡´ï¼Œé€‰æ‹©å¯¹åº”å‚æ•°å³å¯ã€‚

**è¯·åŠ¡å¿…åœ¨å®‰è£…æ–°ä¾èµ–åæµ‹è¯•ä½ çš„åº”ç”¨ã€‚**

## Upgrade Status

ä»¥ä¸‹è¡¨æ ¼åˆ—å‡ºäº† shadcn/ui ä¾èµ–å¯¹ React 19 çš„æ”¯æŒæƒ…å†µï¼š

- âœ…ï¼šåœ¨ npmã€pnpmã€bun ä¸‹å‡å¯æ­£å¸¸ä½¿ç”¨ã€‚
- ğŸš§ï¼špnpmã€bun å¯æ­£å¸¸ä½¿ç”¨ï¼›npm éœ€æ‰‹åŠ¨åŠ å‚æ•°ï¼Œç›¸å…³ PR æ­£åœ¨æ¨è¿›ã€‚

| Package                                                                            | Status | Note                                                        |
| ---------------------------------------------------------------------------------- | ------ | ----------------------------------------------------------- |
| [radix-ui](https://www.npmjs.com/package/@radix-ui/react-icons)                    | âœ…     |                                                             |
| [lucide-react](https://www.npmjs.com/package/lucide-react)                         | âœ…     |                                                             |
| [class-variance-authority](https://www.npmjs.com/package/class-variance-authority) | âœ…     | ä»æœªå£°æ˜ React 19ï¼Œä¸ºæ­£å¸¸ä½¿ç”¨ä¸å—å½±å“                      |
| [tailwindcss-animate](https://www.npmjs.com/package/tailwindcss-animate)           | âœ…     | åŒä¸Š                                                        |
| [embla-carousel-react](https://www.npmjs.com/package/embla-carousel-react)         | âœ…     |                                                             |
| [recharts](https://www.npmjs.com/package/recharts)                                 | âœ…     | è§ä¸‹æ–¹ [Recharts](#recharts) è¯´æ˜                           |
| [react-hook-form](https://www.npmjs.com/package/react-hook-form)                   | âœ…     |                                                             |
| [react-resizable-panels](https://www.npmjs.com/package/react-resizable-panels)     | âœ…     |                                                             |
| [sonner](https://www.npmjs.com/package/sonner)                                     | âœ…     |                                                             |
| [react-day-picker](https://www.npmjs.com/package/react-day-picker)                 | âœ…     | npm éœ€åŠ å‚æ•°ï¼Œæ­£åœ¨æ¨è¿› v9 å‡çº§                              |
| [input-otp](https://www.npmjs.com/package/input-otp)                               | âœ…     |                                                             |
| [vaul](https://www.npmjs.com/package/vaul)                                         | âœ…     |                                                             |
| [@radix-ui/react-icons](https://www.npmjs.com/package/@radix-ui/react-icons)       | âœ…     | å‚è€ƒ [PR #194](https://github.com/radix-ui/icons/pull/194) |
| [cmdk](https://www.npmjs.com/package/cmdk)                                         | âœ…     |                                                             |

å¦‚æœ‰ç–‘é—®ï¼Œè¯·åœ¨ GitHub æäº¤ [issue](https://github.com/shadcn/ui/issues)ã€‚

## Recharts

è‹¥è¦åœ¨ React 19 ä¸­ä½¿ç”¨ rechartsï¼Œéœ€è¦è¦†ç›– `react-is` ç‰ˆæœ¬ï¼š

<Steps>

<Step>åœ¨ `package.json` ä¸­æ·»åŠ  overrides</Step>

```json title="package.json"
"overrides": {
  "react-is": "^19.0.0-rc-69d4b800-20241021"
}
```

æ³¨æ„ï¼š`react-is` çš„ç‰ˆæœ¬éœ€ä¸å®é™…ä½¿ç”¨çš„ React 19 ç‰ˆæœ¬ä¸€è‡´ï¼Œä»¥ä¸Šä»…ä¸ºç¤ºä¾‹ã€‚

<Step>æ‰§è¡Œå®‰è£…å‘½ä»¤</Step>

```bash
npm install --legacy-peer-deps
```

</Steps>
