---
title: Next.js 15 + React 19
description: åœ¨ Next.js 15 å’Œ React 19 ä¸­ä½¿ç”¨ shadcn/uiã€‚
---

<Callout className="bg-blue-50 border-blue-600 dark:border-blue-900 dark:bg-blue-950 mb-6 [&_code]:bg-blue-100 dark:[&_code]:bg-blue-900">
  **æ›´æ–°ï¼š** æˆ‘ä»¬åœ¨ `canary` ç‰ˆæœ¬ä¸­å·²æ·»åŠ äº†å¯¹ React 19 å’Œ Tailwind v4 çš„å…¨é¢æ”¯æŒã€‚è¯·æŸ¥çœ‹ [Tailwind v4](/docs/tailwind-v4) æ–‡æ¡£ä»¥è·å–æ›´å¤šä¿¡æ¯ã€‚
</Callout>

<Callout>
  **ä»¥ä¸‹æŒ‡å—é€‚ç”¨äºä»»ä½•æ”¯æŒ React 19 çš„æ¡†æ¶**ã€‚æˆ‘å°†æ­¤é¡µé¢å‘½åä¸º "Next.js 15 + React 19"ï¼Œä»¥ä¾¿å¸®åŠ©å‡çº§åˆ° Next.js 15 çš„äººæ‰¾åˆ°å®ƒã€‚æˆ‘ä»¬æ­£åœ¨ä¸åŒ…ç»´æŠ¤è€…åˆä½œï¼Œå¸®åŠ©å‡çº§åˆ° React 19ã€‚
</Callout>

## ç®€è€Œè¨€ä¹‹

å¦‚æœä½ ä½¿ç”¨çš„æ˜¯ `npm`ï¼Œå¯ä»¥é€šè¿‡æ·»åŠ æ ‡å¿—æ¥å®‰è£… shadcn/ui ä¾èµ–é¡¹ã€‚è¿è¡Œ `shadcn` CLI æ—¶ï¼Œå®ƒä¼šæç¤ºä½ é€‰æ‹©ä¸€ä¸ªæ ‡å¿—ã€‚å¯¹äº pnpmã€bun æˆ– yarn ä¸éœ€è¦æ ‡å¿—ã€‚

è¯·æŸ¥çœ‹ [å‡çº§çŠ¶æ€](#upgrade-status) ä»¥äº†è§£æ¯ä¸ªåŒ…å¯¹ React 19 æ”¯æŒçš„çŠ¶æ€ã€‚

## å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ

React 19 ç°å·²è¾¾åˆ° [rc](https://www.npmjs.com/package/react?activeTab=versions) é˜¶æ®µï¼Œå¹¶ä¸”åœ¨ [æœ€æ–°çš„ Next.js 15 ç‰ˆæœ¬ä¸­ç»è¿‡æµ‹è¯•å’Œæ”¯æŒ](https://nextjs.org/blog/next-15#react-19)ã€‚

ä¸ºäº†æ”¯æŒ React 19ï¼ŒåŒ…ç»´æŠ¤è€…éœ€è¦æµ‹è¯•å¹¶æ›´æ–°ä»–ä»¬çš„åŒ…ï¼Œå°† React 19 åŒ…å«ä¸ºå¯¹ç­‰ä¾èµ–ã€‚è¿™ä¸€å·¥ä½œ [å·²ç»](https://github.com/radix-ui/primitives/pull/2952) [åœ¨](https://github.com/pacocoursey/cmdk/pull/318) [è¿›è¡Œä¸­](https://github.com/emilkowalski/vaul/pull/498)ã€‚

```diff /^19.0/
"peerDependencies": {
-  "react": "^16.8 || ^17.0 || ^18.0",
+  "react": "^16.8 || ^17.0 || ^18.0 || ^19.0",
-  "react-dom": "^16.8 || ^17.0 || ^18.0"
+  "react-dom": "^16.8 || ^17.0 || ^18.0 || ^19.0"
},
```

<Callout>
  ä½ å¯ä»¥é€šè¿‡è¿è¡Œ `npm info <package> peerDependencies` æ£€æŸ¥ä¸€ä¸ªåŒ…æ˜¯å¦å°† React 19 åˆ—ä¸ºå¯¹ç­‰ä¾èµ–ã€‚
</Callout>

ä¸æ­¤åŒæ—¶ï¼Œå¦‚æœä½ å®‰è£…çš„åŒ… **æœªå°† React 19 åˆ—ä¸ºå¯¹ç­‰ä¾èµ–**ï¼Œä½ ä¼šçœ‹åˆ°å¦‚ä¸‹é”™è¯¯ä¿¡æ¯ï¼š

```bash
npm error code ERESOLVE
npm error ERESOLVE unable to resolve dependency tree
npm error
npm error While resolving: my-app@0.1.0
npm error Found: react@19.0.0-rc-69d4b800-20241021
npm error node_modules/react
npm error   react@"19.0.0-rc-69d4b800-20241021" from the root project
```

<Callout>
  **æ³¨æ„ï¼š** è¿™ä»…é€‚ç”¨äº npmã€‚PNPM å’Œ Bun åªä¼šæ˜¾ç¤ºä¸€ä¸ªæ— å£°è­¦å‘Šã€‚
</Callout>

## å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜

### è§£å†³æ–¹æ¡ˆ 1ï¼š`--force` æˆ– `--legacy-peer-deps`

ä½ å¯ä»¥ä½¿ç”¨ `--force` æˆ– `--legacy-peer-deps` æ ‡å¿—å¼ºåˆ¶å®‰è£…åŒ…ã€‚

```bash
npm i <package> --force

npm i <package> --legacy-peer-deps
```

è¿™å°†å®‰è£…åŒ…å¹¶å¿½ç•¥å¯¹ç­‰ä¾èµ–è­¦å‘Šã€‚

<Accordion type="multiple">
  <AccordionItem value="flags">
    <AccordionTrigger className="font-medium">
      `--force` å’Œ `--legacy-peer-deps` æ ‡å¿—çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ
    </AccordionTrigger>
    <AccordionContent className="[&_ul]:mt-0">

      - `--force`ï¼šå¿½ç•¥å¹¶è¦†ç›–ä»»ä½•ä¾èµ–å†²çªï¼Œå¼ºåˆ¶å®‰è£…åŒ…ã€‚
      - `--legacy-peer-deps`ï¼šè·³è¿‡ä¸¥æ ¼çš„å¯¹ç­‰ä¾èµ–æ£€æŸ¥ï¼Œå…è®¸å®‰è£…æœªæ»¡è¶³å¯¹ç­‰ä¾èµ–çš„åŒ…ä»¥é¿å…é”™è¯¯ã€‚

    </AccordionContent>
  </AccordionItem>
</Accordion>

### è§£å†³æ–¹æ¡ˆ 2ï¼šä½¿ç”¨ React 18

ä½ å¯ä»¥å°† `react` å’Œ `react-dom` é™çº§åˆ°ä¸ä½ å®‰è£…çš„åŒ…å…¼å®¹çš„ç‰ˆæœ¬ 18ï¼Œå¹¶åœ¨ä¾èµ–æ›´æ–°æ—¶å†å‡çº§ã€‚

```bash
npm i react@18 react-dom@18
```

æ— è®ºä½ é€‰æ‹©å“ªç§è§£å†³æ–¹æ¡ˆï¼Œè¯·åŠ¡å¿…å½»åº•æµ‹è¯•ä½ çš„åº”ç”¨ï¼Œä»¥ç¡®ä¿æ²¡æœ‰å›å½’é—®é¢˜ã€‚

## åœ¨ Next.js 15 ä¸Šä½¿ç”¨ shadcn/ui

### ä½¿ç”¨ pnpmã€bun æˆ– yarn

æŒ‰ç…§ [å®‰è£…æŒ‡å—](/docs/installation/next) ä¸­çš„è¯´æ˜å®‰è£… shadcn/uiã€‚ä¸éœ€è¦æ ‡å¿—ã€‚

### ä½¿ç”¨ npm

å½“ä½ è¿è¡Œ `npx shadcn@latest init -d` æ—¶ï¼Œä¼šæç¤ºä½ é€‰æ‹©ä¸€ä¸ªé€‰é¡¹æ¥è§£å†³å¯¹ç­‰ä¾èµ–é—®é¢˜ã€‚

```bash
It looks like you are using React 19.
Some packages may fail to install due to peer dependency issues (see https://ui.shadcn.com/react-19).

? How would you like to proceed? â€º - Use arrow-keys. Return to submit.
â¯   Use --force
    Use --legacy-peer-deps
```

You can then run the command with the flag you choose.

## Adding components

The process for adding components is the same as above. Select a flag to resolve the peer dependency issues.

**Remember to always test your app after installing new dependencies.**

## Upgrade Status

To make it easy for you track the progress of the upgrade, I've created a table below with React 19 support status for the shadcn/ui dependencies.

- âœ… - Works with React 19 using npm, pnpm, and bun.
- ğŸš§ - Works with React 19 using pnpm and bun. Requires flag for npm. PR is in progress.

| Package                                                                            | Status | Note                                                        |
| ---------------------------------------------------------------------------------- | ------ | ----------------------------------------------------------- |
| [radix-ui](https://www.npmjs.com/package/@radix-ui/react-icons)                    | âœ…     |                                                             |
| [lucide-react](https://www.npmjs.com/package/lucide-react)                         | âœ…     |                                                             |
| [class-variance-authority](https://www.npmjs.com/package/class-variance-authority) | âœ…     | Does not list React 19 as a peer dependency.                |
| [tailwindcss-animate](https://www.npmjs.com/package/tailwindcss-animate)           | âœ…     | Does not list React 19 as a peer dependency.                |
| [embla-carousel-react](https://www.npmjs.com/package/embla-carousel-react)         | âœ…     |                                                             |
| [recharts](https://www.npmjs.com/package/recharts)                                 | âœ…     | See note [below](#recharts)                                 |
| [react-hook-form](https://www.npmjs.com/package/react-hook-form)                   | âœ…     |                                                             |
| [react-resizable-panels](https://www.npmjs.com/package/react-resizable-panels)     | âœ…     |                                                             |
| [sonner](https://www.npmjs.com/package/sonner)                                     | âœ…     |                                                             |
| [react-day-picker](https://www.npmjs.com/package/react-day-picker)                 | âœ…     | Works with flag for npm. Work to upgrade to v9 in progress. |
| [input-otp](https://www.npmjs.com/package/input-otp)                               | âœ…     |                                                             |
| [vaul](https://www.npmjs.com/package/vaul)                                         | âœ…     |                                                             |
| [@radix-ui/react-icons](https://www.npmjs.com/package/@radix-ui/react-icons)       | ğŸš§     | See [PR #194](https://github.com/radix-ui/icons/pull/194)   |
| [cmdk](https://www.npmjs.com/package/cmdk)                                         | âœ…     |                                                             |

If you have any questions, please [open an issue](https://github.com/shadcn/ui/issues) on GitHub.

## Recharts

To use recharts with React 19, you will need to override the `react-is` dependency.

<Steps>

<Step>Add the following to your `package.json`</Step>

```json title="package.json"
"overrides": {
  "react-is": "^19.0.0-rc-69d4b800-20241021"
}
```

Note: the `react-is` version needs to match the version of React 19 you are using. The above is an example.

<Step>Run `npm install --legacy-peer-deps`</Step>

</Steps>
